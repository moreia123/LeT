<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página do Usuário</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="user-page">
    <div class="container">
        <!-- Imagem no topo -->
        <div class="logo-container">
            <img src="Logo.jpeg" alt="Logo" class="logo">
        </div>

        <h2>Bem-vindo, <span id="nomeUsuario"></span>!</h2>
        <p>Esta é a página do usuário.</p>

        <h3>Calcular Custo de Entrega</h3>
        <form id="formEntrega">
            <h4>Endereço de Coleta</h4>
            <input type="text" id="ruaColeta" placeholder="Rua" required>
            <input type="text" id="numeroColeta" placeholder="Número" required>
            <select id="bairroColeta" required>
                <option value="">Selecione o Bairro de Coleta</option>
                <option value="Centro">Centro - R$ 10,00</option>
                <option value="São Pedro">São Pedro - R$ 25,00</option>
                <option value="Santa Luzia">Santa Luzia - R$ 25,00</option>
                <option value="Bom Pastor">Bom Pastor - R$ 25,00</option>
                <option value="Esplanada">Esplanada - R$ 25,00</option>
                <option value="Martins">Martins - R$ 25,00</option>
                <!-- Adicione mais bairros conforme necessário -->
            </select>

            <h4>Endereço de Entrega</h4>
            <input type="text" id="ruaEntrega" placeholder="Rua" required>
            <input type="text" id="numeroEntrega" placeholder="Número" required>
            <select id="bairroEntrega" required>
                <option value="">Selecione o Bairro de Entrega</option>
                <option value="Centro">Centro - R$ 10,00</option>
                <option value="São Pedro">São Pedro - R$ 25,00</option>
                <option value="Santa Luzia">Santa Luzia - R$ 25,00</option>
                <option value="Bom Pastor">Bom Pastor - R$ 25,00</option>
                <option value="Esplanada">Esplanada - R$ 25,00</option>
                <option value="Martins">Martins - R$ 25,00</option>
                <!-- Adicione mais bairros conforme necessário -->
            </select>

            <button type="submit">Calcular Custo</button>
        </form>

        <div id="resultadoEntrega">
            <!-- Resultados serão exibidos aqui -->
        </div>

        <h3>Seus Pedidos</h3>
        <table id="tabelaPedidos">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Descrição</th>
                    <th>Local de Coleta</th>
                    <th>Local de Entrega</th>
                    <th>Valor</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                <!-- Pedidos serão inseridos aqui via JavaScript -->
            </tbody>
        </table>

        <h3>Adicionar Novo Pedido</h3>
        <form id="formPedido">
            <input type="text" id="descricao" placeholder="Descrição do Pedido" required>
            <h4>Endereço de Coleta</h4>
            <input type="text" id="ruaColetaPedido" placeholder="Rua" required>
            <input type="text" id="numeroColetaPedido" placeholder="Número" required>
            <select id="bairroColetaPedido" required>
                <option value="">Selecione o Bairro de Coleta</option>
                <option value="Centro">Centro - R$ 10,00</option>
                <option value="São Pedro">São Pedro - R$ 25,00</option>
                <option value="Santa Luzia">Santa Luzia - R$ 25,00</option>
                <option value="Bom Pastor">Bom Pastor - R$ 25,00</option>
                <option value="Esplanada">Esplanada - R$ 25,00</option>
                <option value="Martins">Martins - R$ 25,00</option>
                <!-- Adicione mais bairros conforme necessário -->
            </select>

            <h4>Endereço de Entrega</h4>
            <input type="text" id="ruaEntregaPedido" placeholder="Rua" required>
            <input type="text" id="numeroEntregaPedido" placeholder="Número" required>
            <select id="bairroEntregaPedido" required>
                <option value="">Selecione o Bairro de Entrega</option>
                <option value="Centro">Centro - R$ 10,00</option>
                <option value="São Pedro">São Pedro - R$ 25,00</option>
                <option value="Santa Luzia">Santa Luzia - R$ 25,00</option>
                <option value="Bom Pastor">Bom Pastor - R$ 25,00</option>
                <option value="Esplanada">Esplanada - R$ 25,00</option>
                <option value="Martins">Martins - R$ 25,00</option>
                <!-- Adicione mais bairros conforme necessário -->
            </select>

            <button type="submit">Adicionar Pedido</button>
        </form>

        <a href="index.html">Voltar para a Página Inicial</a>
    </div>

    <script>
        // Recupera o nome do usuário
        const nome = localStorage.getItem('usuarioNome');
        document.getElementById('nomeUsuario').textContent = nome;

        // Função para carregar pedidos
        function carregarPedidos() {
            const pedidos = JSON.parse(localStorage.getItem('pedidos')) || [];
            const tabela = document.getElementById('tabelaPedidos').getElementsByTagName('tbody')[0];
            tabela.innerHTML = ''; // Limpa a tabela antes de carregar os pedidos

            pedidos.forEach((pedido, index) => {
                const row = tabela.insertRow();
                row.insertCell().textContent = index + 1;
                row.insertCell().textContent = pedido.descricao;
                row.insertCell().textContent = `${pedido.ruaColeta}, ${pedido.numeroColeta} - ${pedido.bairroColeta}`;
                row.insertCell().textContent = `${pedido.ruaEntrega}, ${pedido.numeroEntrega} - ${pedido.bairroEntrega}`;
                row.insertCell().textContent = `R$ ${pedido.valor.toFixed(2)}`;
                row.insertCell().textContent = pedido.status;
            });
        }

        // Função para adicionar pedido
        document.getElementById('formPedido').addEventListener('submit', function(event) {
            event.preventDefault();
            const descricao = document.getElementById('descricao').value;
            const ruaColeta = document.getElementById('ruaColetaPedido').value;
            const numeroColeta = document.getElementById('numeroColetaPedido').value;
            const bairroColeta = document.getElementById('bairroColetaPedido').value;
            const ruaEntrega = document.getElementById('ruaEntregaPedido').value;
            const numeroEntrega = document.getElementById('numeroEntregaPedido').value;
            const bairroEntrega = document.getElementById('bairroEntregaPedido').value;

            // Define o valor com base no bairro de entrega
            let valor;
            switch (bairroEntrega) {
                case 'Centro':
                    valor = 10.00;
                    break;
                case 'São Pedro':
                case 'Santa Luzia':
                case 'Bom Pastor':
                case 'Esplanada':
                case 'Martins':
                    valor = 25.00;
                    break;
                default:
                    valor = 0.00; // Para bairros não listados
            }

            const pedido = {
                descricao: descricao,
                ruaColeta: ruaColeta,
                numeroColeta: numeroColeta,
                bairroColeta: bairroColeta,
                ruaEntrega: ruaEntrega,
                numeroEntrega: numeroEntrega,
                bairroEntrega: bairroEntrega,
                valor: valor,
                status: 'Pendente'
            };

            const pedidos = JSON.parse(localStorage.getItem('pedidos')) || [];
            pedidos.push(pedido);
            localStorage.setItem('pedidos', JSON.stringify(pedidos));

            alert('Pedido adicionado com sucesso!');
            carregarPedidos(); // Atualiza a lista de pedidos
            document.getElementById('formPedido').reset(); // Limpa o formulário
        });

        // Função para calcular o custo com base no bairro de entrega
        document.getElementById('formEntrega').addEventListener('submit', function(event) {
            event.preventDefault();
            const bairroEntrega = document.getElementById('bairroEntrega').value;

            let valor;
            switch (bairroEntrega) {
                case 'Centro':
                    valor = 10.00;
                    break;
                case 'São Pedro':
                case 'Santa Luzia':
                case 'Bom Pastor':
                case 'Esplanada':
                case 'Martins':
                    valor = 25.00;
                    break;
                default:
                    valor = 0.00; // Para bairros não listados
            }

            const resultadoDiv = document.getElementById('resultadoEntrega');
            if (valor > 0) {
                resultadoDiv.innerHTML = `
                    <p>Bairro de Entrega: ${bairroEntrega}</p>
                    <p>Custo da Entrega: R$ ${valor.toFixed(2)}</p>
                `;
            } else {
                resultadoDiv.innerHTML = `
                    <p>Bairro de Entrega: ${bairroEntrega}</p>
                    <p>Para este bairro, consulte valores.</p>
                `;
            }
        });

        // Carrega os pedidos ao abrir a página
        carregarPedidos();
    </script>
</body>
</html>
